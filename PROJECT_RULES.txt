ESTÁNDARES DE ARQUITECTURA - ENERTIKA OPS CORE

1. ARQUITECTURA UI (HTMX + SPA):
   - La aplicación funciona como una SPA. El contenedor principal es id="main-content" (definido en base.html).
   - Navegación Principal (Sidebar/Menús): Usar siempre `hx-get="..." hx-target="#main-content" hx-swap="innerHTML"`.
   - ACTUALIZACIÓN DE URL: Es OBLIGATORIO agregar `hx-push-url="true"` en:
     a) Enlaces de la Barra Lateral (Sidebar).
     b) Botones de "Nuevo Registro" o "Crear".
     c) Botones de "Cancelar" que regresan al Dashboard.
     Esto es vital para permitir la recarga de página sin perder la ubicación.

2. SEGURIDAD Y SESIÓN (Token Microsoft):
   - El frontend (base.html) tiene un "Vigilante" que intercepta errores 401.
   - BACKEND (Router): Si el token/sesión es inválido, NUNCA redirigir (307). SIEMPRE retornar `status_code=401`.
     - Ejemplo: `if not token: return HTMLResponse(status_code=401)`
   - Esto activa el Modal de Reconexión automático sin perder los datos del usuario.

3. ESTILO DE FORMULARIOS:
   - Los formularios se envían por HTMX.
   - Éxito: Usar `hx-target="this"` o redirección con JS `window.location.href` si cambia de módulo.
   - Cancelar/Borrar: Usar `HX-Redirect` en el header de respuesta del Backend para limpiar el estado completamente.

4. ESTRUCTURA DE ARCHIVOS:
   - Todo template nuevo debe extender de "base.html".
   - Usar TailwindCSS para estilos. Evitar CSS custom si es posible.