<div id="kanban-container">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 h-full">

        <!-- Column 1: PENDIENTES -->
        <div class="flex flex-col bg-gray-50 rounded-lg shadow-sm h-full border-t-4 border-orange-400">
            <div class="p-4 border-b border-gray-200">
                <h3 class="font-bold text-gray-700 flex justify-between items-center">
                    <span>üì• Pendientes</span>
                    <span class="bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full text-xs">{{ pendientes|length
                        }}</span>
                </h3>
            </div>
            <div class="p-2 flex-1 overflow-y-auto space-y-3">
                {% for item in pendientes %}
                <div
                    class="bg-white p-3 rounded shadow-sm border border-gray-200 hover:shadow-md transition-shadow relative">
                    <!-- Priority -->
                    <div class="absolute top-2 right-2">
                        <span
                            class="text-xs font-bold {{ 'text-red-600' if item.prioridad == 'Alta' else 'text-gray-400' }}">
                            {{ item.prioridad }}
                        </span>
                    </div>

                    <h4 class="font-bold text-sm text-gray-800 pr-8">{{ item.nombre_proyecto or item.titulo_proyecto }}
                    </h4>
                    <p class="text-xs text-gray-500 mt-1">{{ item.cliente_nombre }}</p>
                    <p class="text-xs text-gray-400 mt-1">{{ item.op_id_estandar }}</p>

                    <div class="mt-3 pt-2 border-t border-gray-100 flex justify-end gap-2">
                        <button hx-post="/levantamientos/change-status/{{ item.id_levantamiento }}"
                            hx-vals='{"nuevo_estado": 9}' hx-target="#kanban-container"
                            class="bg-blue-50 text-blue-600 hover:bg-blue-100 px-3 py-1 rounded text-xs font-semibold transition-colors">
                            üìÖ Agendar
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-400 text-sm">No hay pendientes</div>
                {% endfor %}
            </div>
        </div>

        <!-- Column 2: AGENDADOS -->
        <div class="flex flex-col bg-gray-50 rounded-lg shadow-sm h-full border-t-4 border-blue-500">
            <div class="p-4 border-b border-gray-200">
                <h3 class="font-bold text-gray-700 flex justify-between items-center">
                    <span>üìÖ Agendados</span>
                    <span class="bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full text-xs">{{ agendados|length
                        }}</span>
                </h3>
            </div>
            <div class="p-2 flex-1 overflow-y-auto space-y-3">
                {% for item in agendados %}
                <div class="bg-white p-3 rounded shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                    <h4 class="font-bold text-sm text-gray-800">{{ item.nombre_proyecto or item.titulo_proyecto }}</h4>
                    <p class="text-xs text-gray-500 mt-1">{{ item.cliente_nombre }}</p>

                    <!-- Asignados -->
                    <div class="bg-gray-50 p-2 rounded text-xs space-y-1 mt-2">
                        <div class="flex items-center gap-1 text-gray-600">
                            <span>üë∑</span> <span>{{ item.tecnico_nombre or 'Sin asignar' }}</span>
                        </div>
                        <div class="flex items-center gap-1 text-gray-500">
                            <span>üëî</span> <span>{{ item.jefe_nombre or 'Sin jefe' }}</span>
                        </div>
                    </div>

                    <div class="mt-3 pt-2 border-t border-gray-100 flex justify-end gap-2">
                        <button hx-post="/levantamientos/change-status/{{ item.id_levantamiento }}"
                            hx-vals='{"nuevo_estado": 10}' hx-target="#kanban-container"
                            class="bg-yellow-50 text-yellow-600 hover:bg-yellow-100 px-3 py-1 rounded text-xs font-semibold transition-colors">
                            üöÄ Iniciar
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-400 text-sm">Nada agendado</div>
                {% endfor %}
            </div>
        </div>

        <!-- Column 3: EN PROCESO -->
        <div class="flex flex-col bg-gray-50 rounded-lg shadow-sm h-full border-t-4 border-yellow-500">
            <div class="p-4 border-b border-gray-200">
                <h3 class="font-bold text-gray-700 flex justify-between items-center">
                    <span>üîß En Proceso</span>
                    <span class="bg-yellow-100 text-yellow-600 px-2 py-0.5 rounded-full text-xs">{{ en_proceso|length
                        }}</span>
                </h3>
            </div>
            <div class="p-2 flex-1 overflow-y-auto space-y-3">
                {% for item in en_proceso %}
                <div class="bg-white p-3 rounded shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                    <h4 class="font-bold text-sm text-gray-800">{{ item.nombre_proyecto or item.titulo_proyecto }}</h4>
                    <p class="text-xs text-gray-500 mt-1">{{ item.cliente_nombre }}</p>

                    <div class="text-xs text-gray-400 mt-2">
                        ‚è±Ô∏è {{ item.tiempo_relativo }}
                    </div>

                    <div class="mt-3 pt-2 border-t border-gray-100 flex justify-end gap-2">
                        <button hx-post="/levantamientos/change-status/{{ item.id_levantamiento }}"
                            hx-vals='{"nuevo_estado": 11}' hx-target="#kanban-container"
                            class="bg-green-50 text-green-600 hover:bg-green-100 px-3 py-1 rounded text-xs font-semibold transition-colors">
                            ‚úÖ Completar
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-400 text-sm">Nada en proceso</div>
                {% endfor %}
            </div>
        </div>

        <!-- Column 4: COMPLETADOS -->
        <div class="flex flex-col bg-gray-50 rounded-lg shadow-sm h-full border-t-4 border-green-500">
            <div class="p-4 border-b border-gray-200">
                <h3 class="font-bold text-gray-700 flex justify-between items-center">
                    <span>‚úÖ Completados</span>
                    <span class="bg-green-100 text-green-600 px-2 py-0.5 rounded-full text-xs">{{ completados|length
                        }}</span>
                </h3>
            </div>
            <div class="p-2 flex-1 overflow-y-auto space-y-3">
                {% for item in completados %}
                <div class="bg-white p-3 rounded shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                    <h4 class="font-bold text-sm text-gray-800">{{ item.nombre_proyecto or item.titulo_proyecto }}</h4>
                    <p class="text-xs text-gray-500 mt-1">{{ item.cliente_nombre }}</p>

                    <div class="mt-3 pt-2 border-t border-gray-100 flex justify-end gap-2">
                        <button hx-post="/levantamientos/change-status/{{ item.id_levantamiento }}"
                            hx-vals='{"nuevo_estado": 12}' hx-target="#kanban-container"
                            class="bg-green-50 text-green-700 hover:bg-green-100 px-3 py-1 rounded text-xs font-semibold transition-colors">
                            üìÑ Entregar
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-400 text-sm">Nada completado</div>
                {% endfor %}
            </div>
        </div>

        <!-- Column 5: ENTREGADOS -->
        <div class="flex flex-col bg-gray-50 rounded-lg shadow-sm h-full border-t-4 border-green-700">
            <div class="p-4 border-b border-gray-200">
                <h3 class="font-bold text-gray-700 flex justify-between items-center">
                    <span>üì¶ Entregados</span>
                    <span class="bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs">{{ entregados|length
                        }}</span>
                </h3>
            </div>
            <div class="p-2 flex-1 overflow-y-auto space-y-3">
                {% for item in entregados %}
                <div
                    class="bg-white p-3 rounded shadow-sm border border-gray-200 opacity-75 hover:opacity-100 transition-opacity">
                    <div class="flex justify-between items-start">
                        <h4 class="font-bold text-sm text-gray-600">{{ item.nombre_proyecto or item.titulo_proyecto }}
                        </h4>
                        <span class="text-green-600">‚úì</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">{{ item.cliente_nombre }}</p>
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-400 text-sm">Nada entregado</div>
                {% endfor %}
            </div>
        </div>

        <!-- Column 6: POSPUESTOS -->
        <div class="flex flex-col bg-gray-50 rounded-lg shadow-sm h-full border-t-4 border-gray-500">
            <div class="p-4 border-b border-gray-200">
                <h3 class="font-bold text-gray-700 flex justify-between items-center">
                    <span>‚è∏Ô∏è Pospuestos</span>
                    <span class="bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full text-xs">{{ pospuestos|length
                        }}</span>
                </h3>
            </div>
            <div class="p-2 flex-1 overflow-y-auto space-y-3">
                {% for item in pospuestos %}
                <div
                    class="bg-white p-3 rounded shadow-sm border border-gray-200 opacity-60 hover:opacity-100 transition-opacity">
                    <h4 class="font-bold text-sm text-gray-600">{{ item.nombre_proyecto or item.titulo_proyecto }}</h4>
                    <p class="text-xs text-gray-500 mt-1">{{ item.cliente_nombre }}</p>

                    <div class="mt-3 pt-2 border-t border-gray-100 flex justify-end gap-2">
                        <button hx-post="/levantamientos/change-status/{{ item.id_levantamiento }}"
                            hx-vals='{"nuevo_estado": 8}' hx-target="#kanban-container"
                            class="bg-orange-50 text-orange-600 hover:bg-orange-100 px-3 py-1 rounded text-xs font-semibold transition-colors">
                            üîÑ Reactivar
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-400 text-sm">Sin pospuestos</div>
                {% endfor %}
            </div>
        </div>

    </div>