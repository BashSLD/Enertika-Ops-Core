{% if resultados %}
<table class="min-w-full divide-y divide-gray-200 text-sm">
    <thead class="bg-gray-50">
        <tr>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Descripcion</th>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Proveedor</th>
            <th class="px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase">P. Unitario</th>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Unidad</th>
            <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase">Similitud</th>
        </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
        {% for r in resultados %}
        <tr class="hover:bg-teal-50">
            <td class="px-3 py-2 text-gray-700 truncate max-w-[220px]" title="{{ r.descripcion_proveedor }}">
                {{ r.descripcion_proveedor }}
            </td>
            <td class="px-3 py-2">
                <div class="font-medium text-gray-800 truncate max-w-[140px]">{{ r.proveedor_nombre or '-' }}</div>
                <div class="text-xs text-gray-400 font-mono">{{ r.proveedor_rfc or '' }}</div>
            </td>
            <td class="px-3 py-2 text-right font-mono text-gray-800">
                ${{ "{:,.2f}".format(r.precio_unitario) if r.precio_unitario else '-' }}
            </td>
            <td class="px-3 py-2 text-gray-600 text-xs">{{ r.unidad or '-' }}</td>
            <td class="px-3 py-2 text-center">
                {% set pct = (r.similitud * 100)|int if r.similitud else 0 %}
                <span class="inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium
                    {% if pct >= 80 %}bg-green-100 text-green-800
                    {% elif pct >= 50 %}bg-teal-100 text-teal-800
                    {% else %}bg-gray-100 text-gray-700{% endif %}">
                    {{ pct }}%
                </span>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-center text-sm text-gray-400 py-4">No se encontraron materiales similares para "{{ query }}"</p>
{% endif %}
